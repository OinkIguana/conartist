<div class="inventory__saving" *ngIf="saving">
  <md-spinner></md-spinner>
</div>
<ng-container *ngIf="types.length; else placeholder">
  <button md-fab (click)="saveInventory()" class="inventory__save-button" [disabled]="saving">
    <md-icon>save</md-icon>
  </button>
  <md-tab-group (selectedIndexChange)="tabChange($event)" dynamicHeight="true">
    <md-tab *ngFor="let type of types;trackBy:trackID" [label]="type.name">
      <header class="inventory__header" [style.backgroundColor]="type.color|color">
        <h1 class="inventory__title" conEditable [conTent]="type.name" (conTentChange)="setTypeName($event, type.id)" [validator]="typeNameIsUnique"></h1>
      </header>
      <div class="inventory__card-grid">
        <md-card class="inventory__card">
          <md-card-header>
            <md-card-title>Inventory</md-card-title>
            <md-slide-toggle class="inventory__button--right"[(ngModel)]="showDiscontinuedProducts" labelPosition="before">Show discontinued</md-slide-toggle>
          </md-card-header>
          <md-card-content class="inventory__card-content">
            <con-product-list [type]="type" [showDiscontinued]="showDiscontinuedProducts"></con-product-list>
          </md-card-content>
          <md-card-actions>
            <button md-raised-button class="inventory__button" mdTooltip="Download">
              <md-icon>file_download</md-icon>
            </button>
            <button md-raised-button class="inventory__button" mdTooltip="Upload">
              <md-icon>file_upload</md-icon>
            </button>
            <button md-raised-button class="inventory__button" (click)="createProduct(type, products(type.id).length + 1)" mdTooltip="New Product">
              <md-icon>add</md-icon>
            </button>
          </md-card-actions>
        </md-card>
        <md-card class="inventory__card">
          <md-card-header>
            <md-card-title>Prices</md-card-title>
          </md-card-header>
          <md-card-content class="inventory__card-content">
            <con-prices-list [prices]="prices(type.id)"></con-prices-list>
          </md-card-content>
          <md-card-actions>
            <button md-raised-button class="inventory__button" mdTooltip="Download">
              <md-icon>file_download</md-icon>
            </button>
            <button md-raised-button class="inventory__button" mdTooltip="Upload">
              <md-icon>file_upload</md-icon>
            </button>
            <button md-raised-button class="inventory__button" mdTooltip="Edit">
              <md-icon>add</md-icon>
            </button>
          </md-card-actions>
        </md-card>
      </div>
    </md-tab>
    <md-tab>
      <ng-template md-tab-label>
        <div class="inventory__tab-label">
          <md-icon>add</md-icon>
        </div>
      </ng-template>
    </md-tab>
  </md-tab-group>
</ng-container>
<ng-template #placeholder>
  <div class="inventory__placeholder">
    <p>
      You haven't created any products yet!
    </p>
    <button md-fab class="inventory__placeholder-button" (click)="createType(1)">
      <md-icon>add</md-icon>
    </button>
    <p>Get started!</p>
  </div>
</ng-template>
